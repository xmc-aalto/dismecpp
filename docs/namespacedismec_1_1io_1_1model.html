<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DiSMEC++: dismec::io::model Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DiSMEC++
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('namespacedismec_1_1io_1_1model.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">dismec::io::model Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>namespace for all model-related io functions.  
<a href="namespacedismec_1_1io_1_1model.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdismec_1_1io_1_1model_1_1SaveOption.html">SaveOption</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdismec_1_1io_1_1model_1_1WeightFileEntry.html">WeightFileEntry</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collect the data about a weight file.  <a href="structdismec_1_1io_1_1model_1_1WeightFileEntry.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdismec_1_1io_1_1model_1_1PartialModelIO.html">PartialModelIO</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class is used as an implementation detail to capture the common code of <a class="el" href="classdismec_1_1io_1_1model_1_1PartialModelSaver.html">PartialModelSaver</a> and <a class="el" href="classdismec_1_1io_1_1model_1_1PartialModelLoader.html">PartialModelLoader</a>.  <a href="classdismec_1_1io_1_1model_1_1PartialModelIO.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdismec_1_1io_1_1model_1_1PartialModelSaver.html">PartialModelSaver</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage saving a model consisting of multiple partial models.  <a href="classdismec_1_1io_1_1model_1_1PartialModelSaver.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdismec_1_1io_1_1model_1_1PartialModelLoader.html">PartialModelLoader</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class allows loading only a subset of the weights of a large model.  <a href="classdismec_1_1io_1_1model_1_1PartialModelLoader.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aa296f53aedee6f59002fa01439ebc794"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedismec_1_1io_1_1model.html#aa296f53aedee6f59002fa01439ebc794">WeightFormat</a> { <a class="el" href="namespacedismec_1_1io_1_1model.html#aa296f53aedee6f59002fa01439ebc794a6d5ba618729df78c44be2ffc850fa281">DENSE_TXT</a> = 0
, <a class="el" href="namespacedismec_1_1io_1_1model.html#aa296f53aedee6f59002fa01439ebc794a9e31d6cbca343a71693a681e7eb427ec">SPARSE_TXT</a> = 1
, <a class="el" href="namespacedismec_1_1io_1_1model.html#aa296f53aedee6f59002fa01439ebc794af0c60767b8402acf1f1bd256c0fa1e9e">DENSE_NPY</a> = 2
, <a class="el" href="namespacedismec_1_1io_1_1model.html#aa296f53aedee6f59002fa01439ebc794ab901a11d23ec68072265b7c78e650e50">NULL_FORMAT</a> = 3
 }</td></tr>
<tr class="memdesc:aa296f53aedee6f59002fa01439ebc794"><td class="mdescLeft">&#160;</td><td class="mdescRight">Describes the format in which the weight data has been saved.  <a href="namespacedismec_1_1io_1_1model.html#aa296f53aedee6f59002fa01439ebc794">More...</a><br /></td></tr>
<tr class="separator:aa296f53aedee6f59002fa01439ebc794"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a40d9a974c3183de5a571bd95f73fb73d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacedismec_1_1io_1_1model.html#aa296f53aedee6f59002fa01439ebc794">WeightFormat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedismec_1_1io_1_1model.html#a40d9a974c3183de5a571bd95f73fb73d">parse_weights_format</a> (std::string_view name)</td></tr>
<tr class="memdesc:a40d9a974c3183de5a571bd95f73fb73d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the eighs.  <a href="namespacedismec_1_1io_1_1model.html#a40d9a974c3183de5a571bd95f73fb73d">More...</a><br /></td></tr>
<tr class="separator:a40d9a974c3183de5a571bd95f73fb73d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa4366a1f56e499dba21a786ca9ed6cf"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedismec_1_1io_1_1model.html#aaa4366a1f56e499dba21a786ca9ed6cf">to_string</a> (<a class="el" href="namespacedismec_1_1io_1_1model.html#aa296f53aedee6f59002fa01439ebc794">WeightFormat</a> format)</td></tr>
<tr class="separator:aaa4366a1f56e499dba21a786ca9ed6cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ca86376161fa59fa32d4f977e73ae7f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedismec_1_1io_1_1model.html#a8ca86376161fa59fa32d4f977e73ae7f">save_model</a> (const path &amp;target_file, const std::shared_ptr&lt; const <a class="el" href="classdismec_1_1model_1_1Model.html">Model</a> &gt; &amp;model, <a class="el" href="structdismec_1_1io_1_1model_1_1SaveOption.html">SaveOption</a> options)</td></tr>
<tr class="memdesc:a8ca86376161fa59fa32d4f977e73ae7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves a complete model to a file.  <a href="namespacedismec_1_1io_1_1model.html#a8ca86376161fa59fa32d4f977e73ae7f">More...</a><br /></td></tr>
<tr class="separator:a8ca86376161fa59fa32d4f977e73ae7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3aaaa30e84816663dbdb7a1d7694dba5"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classdismec_1_1model_1_1Model.html">Model</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedismec_1_1io_1_1model.html#a3aaaa30e84816663dbdb7a1d7694dba5">load_model</a> (path source)</td></tr>
<tr class="separator:a3aaaa30e84816663dbdb7a1d7694dba5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfdbf4d49bb96037d6b6df2ce7909191"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedismec_1_1io_1_1model.html#abfdbf4d49bb96037d6b6df2ce7909191">save_dense_weights_txt</a> (std::ostream &amp;target, const <a class="el" href="classdismec_1_1model_1_1Model.html">Model</a> &amp;model)</td></tr>
<tr class="memdesc:abfdbf4d49bb96037d6b6df2ce7909191"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves the dense weights in a plain-text format.  <a href="namespacedismec_1_1io_1_1model.html#abfdbf4d49bb96037d6b6df2ce7909191">More...</a><br /></td></tr>
<tr class="separator:abfdbf4d49bb96037d6b6df2ce7909191"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab23fe02efae025836a76b0ee57ed4b60"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedismec_1_1io_1_1model.html#ab23fe02efae025836a76b0ee57ed4b60">load_dense_weights_txt</a> (std::istream &amp;source, <a class="el" href="classdismec_1_1model_1_1Model.html">Model</a> &amp;target)</td></tr>
<tr class="memdesc:ab23fe02efae025836a76b0ee57ed4b60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads weights saved by <a class="el" href="namespacedismec_1_1io_1_1model.html#abfdbf4d49bb96037d6b6df2ce7909191" title="Saves the dense weights in a plain-text format.">io::model::save_dense_weights_txt</a>.  <a href="namespacedismec_1_1io_1_1model.html#ab23fe02efae025836a76b0ee57ed4b60">More...</a><br /></td></tr>
<tr class="separator:ab23fe02efae025836a76b0ee57ed4b60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d86304e254fb573e16ec8c846ee3a41"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedismec_1_1io_1_1model.html#a4d86304e254fb573e16ec8c846ee3a41">save_dense_weights_npy</a> (std::streambuf &amp;target, const <a class="el" href="classdismec_1_1model_1_1Model.html">Model</a> &amp;model)</td></tr>
<tr class="memdesc:a4d86304e254fb573e16ec8c846ee3a41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves the dense weights in a npy file.  <a href="namespacedismec_1_1io_1_1model.html#a4d86304e254fb573e16ec8c846ee3a41">More...</a><br /></td></tr>
<tr class="separator:a4d86304e254fb573e16ec8c846ee3a41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb349249b869b7b98cc15bd1c443e6a3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedismec_1_1io_1_1model.html#acb349249b869b7b98cc15bd1c443e6a3">load_dense_weights_npy</a> (std::streambuf &amp;target, <a class="el" href="classdismec_1_1model_1_1Model.html">Model</a> &amp;model)</td></tr>
<tr class="memdesc:acb349249b869b7b98cc15bd1c443e6a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads dense weights from a npy file.  <a href="namespacedismec_1_1io_1_1model.html#acb349249b869b7b98cc15bd1c443e6a3">More...</a><br /></td></tr>
<tr class="separator:acb349249b869b7b98cc15bd1c443e6a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d15f7ead589f5d5153b1fe92e257aef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedismec_1_1io_1_1model.html#a9d15f7ead589f5d5153b1fe92e257aef">save_as_sparse_weights_txt</a> (std::ostream &amp;target, const <a class="el" href="classdismec_1_1model_1_1Model.html">Model</a> &amp;model, double threshold)</td></tr>
<tr class="memdesc:a9d15f7ead589f5d5153b1fe92e257aef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves the weights in sparse plain-text format, culling small weights.  <a href="namespacedismec_1_1io_1_1model.html#a9d15f7ead589f5d5153b1fe92e257aef">More...</a><br /></td></tr>
<tr class="separator:a9d15f7ead589f5d5153b1fe92e257aef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09c54fa7d58827f37b2e737624a99e40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedismec_1_1io_1_1model.html#a09c54fa7d58827f37b2e737624a99e40">load_sparse_weights_txt</a> (std::istream &amp;source, <a class="el" href="classdismec_1_1model_1_1Model.html">Model</a> &amp;target)</td></tr>
<tr class="memdesc:a09c54fa7d58827f37b2e737624a99e40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads sparse weights from plain-text format.  <a href="namespacedismec_1_1io_1_1model.html#a09c54fa7d58827f37b2e737624a99e40">More...</a><br /></td></tr>
<tr class="separator:a09c54fa7d58827f37b2e737624a99e40"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>namespace for all model-related io functions. </p>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="aa296f53aedee6f59002fa01439ebc794"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa296f53aedee6f59002fa01439ebc794">&#9670;&nbsp;</a></span>WeightFormat</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="namespacedismec_1_1io_1_1model.html#aa296f53aedee6f59002fa01439ebc794">dismec::io::model::WeightFormat</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Describes the format in which the weight data has been saved. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aa296f53aedee6f59002fa01439ebc794a6d5ba618729df78c44be2ffc850fa281"></a>DENSE_TXT&#160;</td><td class="fielddoc"><p><a class="el" href="model-data.html#model-data-dense-txt">Dense Text Format</a> </p>
</td></tr>
<tr><td class="fieldname"><a id="aa296f53aedee6f59002fa01439ebc794a9e31d6cbca343a71693a681e7eb427ec"></a>SPARSE_TXT&#160;</td><td class="fielddoc"><p><a class="el" href="model-data.html#model-data-sparse-txt">Sparse Text Format</a> </p>
</td></tr>
<tr><td class="fieldname"><a id="aa296f53aedee6f59002fa01439ebc794af0c60767b8402acf1f1bd256c0fa1e9e"></a>DENSE_NPY&#160;</td><td class="fielddoc"><p><a class="el" href="model-data.html#model-data-dense-npy">Dense Numpy Format</a> </p>
</td></tr>
<tr><td class="fieldname"><a id="aa296f53aedee6f59002fa01439ebc794ab901a11d23ec68072265b7c78e650e50"></a>NULL_FORMAT&#160;</td><td class="fielddoc"><p>This format exists for testing purposes only, and indicates that the weights will not be saved. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="model-io_8h_source.html#l00099">99</a> of file <a class="el" href="model-io_8h_source.html">model-io.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="acb349249b869b7b98cc15bd1c443e6a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb349249b869b7b98cc15bd1c443e6a3">&#9670;&nbsp;</a></span>load_dense_weights_npy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dismec::io::model::load_dense_weights_npy </td>
          <td>(</td>
          <td class="paramtype">std::streambuf &amp;&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classdismec_1_1model_1_1Model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads dense weights from a npy file. </p>
<p>The npy file needs to contain a row-major array, with the number of rows corresponding to the number of labels. The data type needs to be an exact match to the datatype used in the model, i.e. <code>real_t</code>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>Input stream buffer from which the data is read. </td></tr>
    <tr><td class="paramname">target</td><td>Model whose weights to fill in. It is assumed that <code>target</code> is already of the correct size. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="weights_8cpp_source.html#l00082">82</a> of file <a class="el" href="weights_8cpp_source.html">weights.cpp</a>.</p>

<p class="reference">References <a class="el" href="common_8h_source.html#l00120">dismec::io::binary_load()</a>, <a class="el" href="model_8h_source.html#l00105">dismec::model::Model::contained_labels()</a>, <a class="el" href="weights_8cpp_source.html#l00037">anonymous_namespace{weights.cpp}::load_weights()</a>, <a class="el" href="classdismec_1_1model_1_1Model.html#a31a7492ca66d9483bbe8eb723f186a9a">dismec::model::Model::num_features()</a>, <a class="el" href="io_2numpy_8cpp_source.html#l00280">dismec::io::parse_npy_header()</a>, and <a class="el" href="common_8h_source.html#l00023">THROW_ERROR</a>.</p>

<p class="reference">Referenced by <a class="el" href="model-io_8cpp_source.html#l00067">anonymous_namespace{model-io.cpp}::read_weights_dispatch()</a>, and <a class="el" href="weights_8cpp_source.html#l00228">TEST_CASE()</a>.</p>

</div>
</div>
<a id="ab23fe02efae025836a76b0ee57ed4b60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab23fe02efae025836a76b0ee57ed4b60">&#9670;&nbsp;</a></span>load_dense_weights_txt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dismec::io::model::load_dense_weights_txt </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classdismec_1_1model_1_1Model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads weights saved by <a class="el" href="namespacedismec_1_1io_1_1model.html#abfdbf4d49bb96037d6b6df2ce7909191" title="Saves the dense weights in a plain-text format.">io::model::save_dense_weights_txt</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>The stream from which to load the weights. </td></tr>
    <tr><td class="paramname">target</td><td>Model whose weights to fill in. It is assumed that <code>target</code> is already of the correct size. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">If</td><td>there is an error when reading the weights, or if the number of labels in <code>target</code> mismatches the number of lines in <code>source</code>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="weights_8cpp_source.html#l00061">61</a> of file <a class="el" href="weights_8cpp_source.html">weights.cpp</a>.</p>

<p class="reference">References <a class="el" href="weights_8cpp_source.html#l00037">anonymous_namespace{weights.cpp}::load_weights()</a>, and <a class="el" href="common_8cpp_source.html#l00037">dismec::io::read_vector_from_text()</a>.</p>

<p class="reference">Referenced by <a class="el" href="model-io_8cpp_source.html#l00067">anonymous_namespace{model-io.cpp}::read_weights_dispatch()</a>, and <a class="el" href="weights_8cpp_source.html#l00180">TEST_CASE()</a>.</p>

</div>
</div>
<a id="a3aaaa30e84816663dbdb7a1d7694dba5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3aaaa30e84816663dbdb7a1d7694dba5">&#9670;&nbsp;</a></span>load_model()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classdismec_1_1model_1_1Model.html">Model</a> &gt; dismec::io::model::load_model </td>
          <td>(</td>
          <td class="paramtype">path&#160;</td>
          <td class="paramname"><em>source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="model-io_8cpp_source.html#l00334">334</a> of file <a class="el" href="model-io_8cpp_source.html">model-io.cpp</a>.</p>

<p class="reference">References <a class="el" href="model-io_8cpp_source.html#l00373">dismec::io::model::PartialModelLoader::load_model()</a>.</p>

<p class="reference">Referenced by <a class="el" href="pybind_8cpp_source.html#l00037">PYBIND11_MODULE()</a>.</p>

</div>
</div>
<a id="a09c54fa7d58827f37b2e737624a99e40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09c54fa7d58827f37b2e737624a99e40">&#9670;&nbsp;</a></span>load_sparse_weights_txt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dismec::io::model::load_sparse_weights_txt </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classdismec_1_1model_1_1Model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads sparse weights from plain-text format. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>The stream from which to load the weights. </td></tr>
    <tr><td class="paramname">target</td><td>Model whose weights to fill in. It is assumed that <code>target</code> is already of the correct size. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">If</td><td>there is an error when reading the weights, or if the number of labels in <code>target</code> mismatches the number of lines in <code>source</code>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="weights_8cpp_source.html#l00140">140</a> of file <a class="el" href="weights_8cpp_source.html">weights.cpp</a>.</p>

<p class="reference">References <a class="el" href="model_8h_source.html#l00098">dismec::model::Model::labels_begin()</a>, <a class="el" href="model_8h_source.html#l00102">dismec::model::Model::labels_end()</a>, <a class="el" href="classdismec_1_1model_1_1Model.html#a31a7492ca66d9483bbe8eb723f186a9a">dismec::model::Model::num_features()</a>, <a class="el" href="model_8h_source.html#l00078">dismec::model::Model::num_labels()</a>, <a class="el" href="common_8h_source.html#l00052">dismec::io::parse_sparse_vector_from_text()</a>, <a class="el" href="model_8cpp_source.html#l00051">dismec::model::Model::set_weights_for_label()</a>, and <a class="el" href="common_8h_source.html#l00023">THROW_ERROR</a>.</p>

<p class="reference">Referenced by <a class="el" href="model-io_8cpp_source.html#l00067">anonymous_namespace{model-io.cpp}::read_weights_dispatch()</a>, and <a class="el" href="weights_8cpp_source.html#l00180">TEST_CASE()</a>.</p>

</div>
</div>
<a id="a40d9a974c3183de5a571bd95f73fb73d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40d9a974c3183de5a571bd95f73fb73d">&#9670;&nbsp;</a></span>parse_weights_format()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacedismec_1_1io_1_1model.html#aa296f53aedee6f59002fa01439ebc794">WeightFormat</a> dismec::io::model::parse_weights_format </td>
          <td>(</td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the eighs. </p>

<p class="definition">Definition at line <a class="el" href="model-io_8cpp_source.html#l00084">84</a> of file <a class="el" href="model-io_8cpp_source.html">model-io.cpp</a>.</p>

<p class="reference">References <a class="el" href="model-io_8cpp_source.html#l00028">anonymous_namespace{model-io.cpp}::weight_format_names</a>.</p>

<p class="reference">Referenced by <a class="el" href="pybind_8cpp_source.html#l00037">PYBIND11_MODULE()</a>, and <a class="el" href="model-io_8cpp_source.html#l00093">dismec::io::model::PartialModelIO::read_metadata_file()</a>.</p>

</div>
</div>
<a id="a9d15f7ead589f5d5153b1fe92e257aef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d15f7ead589f5d5153b1fe92e257aef">&#9670;&nbsp;</a></span>save_as_sparse_weights_txt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dismec::io::model::save_as_sparse_weights_txt </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classdismec_1_1model_1_1Model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>threshold</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves the weights in sparse plain-text format, culling small weights. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>Stream to which the weights are written. </td></tr>
    <tr><td class="paramname">model</td><td>Reference to the model whose weights will be saved. Note that if the model already has sparse weights, additional culling based in threshold will be performed over the nonzero weights. Each line in the resulting file corresponds to the weight vector of one label. </td></tr>
    <tr><td class="paramname">threshold</td><td>Threshold below which weights will be set to zero and omitted from the file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">If</td><td><code>threshold &lt; 0</code>. <code>target</code> remains unmodified in that case. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="weights_8cpp_source.html#l00111">111</a> of file <a class="el" href="weights_8cpp_source.html">weights.cpp</a>.</p>

<p class="reference">References <a class="el" href="model_8h_source.html#l00105">dismec::model::Model::contained_labels()</a>, <a class="el" href="classdismec_1_1model_1_1Model.html#a31a7492ca66d9483bbe8eb723f186a9a">dismec::model::Model::num_features()</a>, and <a class="el" href="weights_8cpp_source.html#l00023">anonymous_namespace{weights.cpp}::save_weights()</a>.</p>

<p class="reference">Referenced by <a class="el" href="model-io_8cpp_source.html#l00043">anonymous_namespace{model-io.cpp}::save_weights_dispatch()</a>, and <a class="el" href="weights_8cpp_source.html#l00180">TEST_CASE()</a>.</p>

</div>
</div>
<a id="a4d86304e254fb573e16ec8c846ee3a41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d86304e254fb573e16ec8c846ee3a41">&#9670;&nbsp;</a></span>save_dense_weights_npy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dismec::io::model::save_dense_weights_npy </td>
          <td>(</td>
          <td class="paramtype">std::streambuf &amp;&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classdismec_1_1model_1_1Model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves the dense weights in a npy file. </p>
<p>The weights are saved in as a two dimensional array, with rows corresponding to labels and columns corresponding to features. The data is written in row-major format to allow loading a subset of the labels by reading contiguous parts of the file. Since the output is binary, we operate directly on a stream-buffer here. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>Output stream buffer where the data is written. </td></tr>
    <tr><td class="paramname">model</td><td>Reference to the model whose weights will be saved. If the model has sparse weights, the weight vectors will be converted to a dense format. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="weights_8cpp_source.html#l00073">73</a> of file <a class="el" href="weights_8cpp_source.html">weights.cpp</a>.</p>

<p class="reference">References <a class="el" href="common_8h_source.html#l00110">dismec::io::binary_dump()</a>, <a class="el" href="model_8h_source.html#l00105">dismec::model::Model::contained_labels()</a>, <a class="el" href="io_2numpy_8cpp_source.html#l00048">dismec::io::make_npy_description()</a>, <a class="el" href="classdismec_1_1model_1_1Model.html#a31a7492ca66d9483bbe8eb723f186a9a">dismec::model::Model::num_features()</a>, <a class="el" href="weights_8cpp_source.html#l00023">anonymous_namespace{weights.cpp}::save_weights()</a>, and <a class="el" href="io_2numpy_8cpp_source.html#l00032">dismec::io::write_npy_header()</a>.</p>

<p class="reference">Referenced by <a class="el" href="model-io_8cpp_source.html#l00043">anonymous_namespace{model-io.cpp}::save_weights_dispatch()</a>, and <a class="el" href="weights_8cpp_source.html#l00228">TEST_CASE()</a>.</p>

</div>
</div>
<a id="abfdbf4d49bb96037d6b6df2ce7909191"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfdbf4d49bb96037d6b6df2ce7909191">&#9670;&nbsp;</a></span>save_dense_weights_txt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dismec::io::model::save_dense_weights_txt </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classdismec_1_1model_1_1Model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves the dense weights in a plain-text format. </p>
<p>Each row corresponds to one label, and each column to a feature. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>Output stream where the data is written. </td></tr>
    <tr><td class="paramname">model</td><td>Reference to the model whose weights will be saved. If the model has sparse weights, the weight vectors will be converted to a dense format. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section attention"><dt>Attention</dt><dd>Note that this is transposed from the way liblinear saves weights, but it makes it easier to read the weights for only a subset of the labels. </dd></dl>

<p class="definition">Definition at line <a class="el" href="weights_8cpp_source.html#l00051">51</a> of file <a class="el" href="weights_8cpp_source.html">weights.cpp</a>.</p>

<p class="reference">References <a class="el" href="weights_8cpp_source.html#l00023">anonymous_namespace{weights.cpp}::save_weights()</a>, and <a class="el" href="common_8cpp_source.html#l00021">dismec::io::write_vector_as_text()</a>.</p>

<p class="reference">Referenced by <a class="el" href="model-io_8cpp_source.html#l00043">anonymous_namespace{model-io.cpp}::save_weights_dispatch()</a>, and <a class="el" href="weights_8cpp_source.html#l00180">TEST_CASE()</a>.</p>

</div>
</div>
<a id="a8ca86376161fa59fa32d4f977e73ae7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ca86376161fa59fa32d4f977e73ae7f">&#9670;&nbsp;</a></span>save_model()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dismec::io::model::save_model </td>
          <td>(</td>
          <td class="paramtype">const path &amp;&#160;</td>
          <td class="paramname"><em>target_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; const <a class="el" href="classdismec_1_1model_1_1Model.html">Model</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdismec_1_1io_1_1model_1_1SaveOption.html">SaveOption</a>&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves a complete model to a file. </p>
<p>This function saves a complete model using the specified options, to <code>target_file</code>. This function cannot be used to save a partial model! </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target_file</td><td>The path to the file where the metadata will be saved. Will also be used as prefix for the names of the weight files. If the files already exist, they will be overwritten. </td></tr>
    <tr><td class="paramname">model</td><td>The model to be saved. </td></tr>
    <tr><td class="paramname">options</td><td>Additional options to influence how the save file is generated. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="model-io_8cpp_source.html#l00308">308</a> of file <a class="el" href="model-io_8cpp_source.html">model-io.cpp</a>.</p>

<p class="reference">References <a class="el" href="model-io_8h_source.html#l00114">dismec::io::model::SaveOption::SplitFiles</a>.</p>

</div>
</div>
<a id="aaa4366a1f56e499dba21a786ca9ed6cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa4366a1f56e499dba21a786ca9ed6cf">&#9670;&nbsp;</a></span>to_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * dismec::io::model::to_string </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacedismec_1_1io_1_1model.html#aa296f53aedee6f59002fa01439ebc794">WeightFormat</a>&#160;</td>
          <td class="paramname"><em>format</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="model-io_8cpp_source.html#l00089">89</a> of file <a class="el" href="model-io_8cpp_source.html">model-io.cpp</a>.</p>

<p class="reference">References <a class="el" href="model-io_8cpp_source.html#l00028">anonymous_namespace{model-io.cpp}::weight_format_names</a>.</p>

<p class="reference">Referenced by <a class="el" href="labelstats_8cpp_source.html#l00018">main()</a>, <a class="el" href="common_8cpp_source.html#l00010">dismec::io::detail::print_char()</a>, <a class="el" href="pybind_8cpp_source.html#l00037">PYBIND11_MODULE()</a>, and <a class="el" href="model-io_8cpp_source.html#l00234">dismec::io::model::PartialModelSaver::update_meta_file()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacedismec.html">dismec</a></li><li class="navelem"><a class="el" href="namespacedismec_1_1io.html">io</a></li><li class="navelem"><a class="el" href="namespacedismec_1_1io_1_1model.html">model</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
