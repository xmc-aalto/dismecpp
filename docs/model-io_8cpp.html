<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DiSMEC++: src/io/model-io.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DiSMEC++
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('model-io_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">model-io.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="model-io_8h_source.html">io/model-io.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="common_8h_source.html">io/common.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="weights_8h_source.html">io/weights.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dense_8h_source.html">model/dense.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sparse_8h_source.html">model/sparse.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="submodel_8h_source.html">model/submodel.h</a>&quot;</code><br />
<code>#include &lt;fstream&gt;</code><br />
<code>#include &lt;array&gt;</code><br />
<code>#include &lt;iomanip&gt;</code><br />
<code>#include &lt;utility&gt;</code><br />
<code>#include &quot;spdlog/spdlog.h&quot;</code><br />
<code>#include &quot;spdlog/fmt/fmt.h&quot;</code><br />
<code>#include &quot;spdlog/fmt/chrono.h&quot;</code><br />
<code>#include &quot;nlohmann/json.hpp&quot;</code><br />
<code>#include &quot;<a class="el" href="numa_8h_source.html">parallel/numa.h</a>&quot;</code><br />
<code>#include &quot;doctest.h&quot;</code><br />
</div>
<p><a href="model-io_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespaceanonymous__namespace_02model-io_8cpp_03"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceanonymous__namespace_02model-io_8cpp_03.html">anonymous_namespace{model-io.cpp}</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ab701e3ac61a85b337ec5c1abaad6742d"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="model-io_8cpp.html#ab701e3ac61a85b337ec5c1abaad6742d">json</a> = nlohmann::json</td></tr>
<tr class="separator:ab701e3ac61a85b337ec5c1abaad6742d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9225d86bc2ef9e003da72793de069491"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceanonymous__namespace_02model-io_8cpp_03.html#a9225d86bc2ef9e003da72793de069491">anonymous_namespace{model-io.cpp}::save_weights_dispatch</a> (std::ostream &amp;target, const <a class="el" href="classdismec_1_1model_1_1Model.html">Model</a> &amp;model, <a class="el" href="structdismec_1_1io_1_1model_1_1SaveOption.html">SaveOption</a> &amp;options)</td></tr>
<tr class="memdesc:a9225d86bc2ef9e003da72793de069491"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function calls on of the save functions, depending on the format specified on <code>options</code>  <a href="namespaceanonymous__namespace_02model-io_8cpp_03.html#a9225d86bc2ef9e003da72793de069491">More...</a><br /></td></tr>
<tr class="separator:a9225d86bc2ef9e003da72793de069491"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98c539a9fad358a4456c8a92bbb2cd12"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceanonymous__namespace_02model-io_8cpp_03.html#a98c539a9fad358a4456c8a92bbb2cd12">anonymous_namespace{model-io.cpp}::read_weights_dispatch</a> (std::istream &amp;source, <a class="el" href="namespacedismec_1_1io_1_1model.html#aa296f53aedee6f59002fa01439ebc794">WeightFormat</a> format, <a class="el" href="classdismec_1_1model_1_1Model.html">Model</a> &amp;model)</td></tr>
<tr class="memdesc:a98c539a9fad358a4456c8a92bbb2cd12"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function calls the reads function that corresponds to the given weight format.  <a href="namespaceanonymous__namespace_02model-io_8cpp_03.html#a98c539a9fad358a4456c8a92bbb2cd12">More...</a><br /></td></tr>
<tr class="separator:a98c539a9fad358a4456c8a92bbb2cd12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0c23ad1d6b907d7f6678361cb25acf8"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classdismec_1_1model_1_1Model.html">Model</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceanonymous__namespace_02model-io_8cpp_03.html#ad0c23ad1d6b907d7f6678361cb25acf8">anonymous_namespace{model-io.cpp}::make_model</a> (long num_features, ::<a class="el" href="structdismec_1_1model_1_1PartialModelSpec.html">model::PartialModelSpec</a> spec, bool sparse)</td></tr>
<tr class="separator:ad0c23ad1d6b907d7f6678361cb25acf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcf90935cf2c8e080f751eac26e86d7b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceanonymous__namespace_02model-io_8cpp_03.html#adcf90935cf2c8e080f751eac26e86d7b">anonymous_namespace{model-io.cpp}::use_sparse_weights</a> (<a class="el" href="classdismec_1_1io_1_1model_1_1PartialModelLoader.html#a6c6b9079af1c1305c17f2f44ab5b3732">PartialModelLoader::ESparseMode</a> mode, <a class="el" href="namespacedismec_1_1io_1_1model.html#aa296f53aedee6f59002fa01439ebc794">WeightFormat</a> format)</td></tr>
<tr class="separator:adcf90935cf2c8e080f751eac26e86d7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4ace95ffb6afe677c9328cdd7c0803c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="model-io_8cpp.html#ad4ace95ffb6afe677c9328cdd7c0803c">TEST_CASE</a> (&quot;partial model writer verifier&quot;)</td></tr>
<tr class="separator:ad4ace95ffb6afe677c9328cdd7c0803c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3ccff6ab7e93045877d8516ff69e5e5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="model-io_8cpp.html#af3ccff6ab7e93045877d8516ff69e5e5">TEST_CASE</a> (&quot;label lower bound&quot;)</td></tr>
<tr class="separator:af3ccff6ab7e93045877d8516ff69e5e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed9f824608fd0c2ea295036ddf56be1d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="model-io_8cpp.html#aed9f824608fd0c2ea295036ddf56be1d">TEST_CASE</a> (&quot;insert_sub_file&quot;)</td></tr>
<tr class="separator:aed9f824608fd0c2ea295036ddf56be1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aaf31c2405cf93b23a7005de8a4860266"><td class="memItemLeft" align="right" valign="top">const std::array&lt; const char *, 4 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceanonymous__namespace_02model-io_8cpp_03.html#aaf31c2405cf93b23a7005de8a4860266">anonymous_namespace{model-io.cpp}::weight_format_names</a></td></tr>
<tr class="memdesc:aaf31c2405cf93b23a7005de8a4860266"><td class="mdescLeft">&#160;</td><td class="mdescRight">Translation from io::model::WeightFormat to <code>std::string</code>.  <a href="namespaceanonymous__namespace_02model-io_8cpp_03.html#aaf31c2405cf93b23a7005de8a4860266">More...</a><br /></td></tr>
<tr class="separator:aaf31c2405cf93b23a7005de8a4860266"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb30b1d03973f7fde16bdf04b0708ca8"><td class="memItemLeft" align="right" valign="top">const std::array&lt; bool, 4 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceanonymous__namespace_02model-io_8cpp_03.html#abb30b1d03973f7fde16bdf04b0708ca8">anonymous_namespace{model-io.cpp}::weight_format_sparsity</a></td></tr>
<tr class="memdesc:abb30b1d03973f7fde16bdf04b0708ca8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lookup which mode has sparse weights.  <a href="namespaceanonymous__namespace_02model-io_8cpp_03.html#abb30b1d03973f7fde16bdf04b0708ca8">More...</a><br /></td></tr>
<tr class="separator:abb30b1d03973f7fde16bdf04b0708ca8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ab701e3ac61a85b337ec5c1abaad6742d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab701e3ac61a85b337ec5c1abaad6742d">&#9670;&nbsp;</a></span>json</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="model-io_8cpp.html#ab701e3ac61a85b337ec5c1abaad6742d">json</a> =  nlohmann::json</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="model-io_8cpp_source.html#l00022">22</a> of file <a class="el" href="model-io_8cpp_source.html">model-io.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aed9f824608fd0c2ea295036ddf56be1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed9f824608fd0c2ea295036ddf56be1d">&#9670;&nbsp;</a></span>TEST_CASE() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">&quot;insert_sub_file&quot;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="model-io_8cpp_source.html#l00529">529</a> of file <a class="el" href="model-io_8cpp_source.html">model-io.cpp</a>.</p>

<p class="reference">References <a class="el" href="namespacedismec_1_1io_1_1model.html#aa296f53aedee6f59002fa01439ebc794ab901a11d23ec68072265b7c78e650e50">dismec::io::model::NULL_FORMAT</a>.</p>

</div>
</div>
<a id="af3ccff6ab7e93045877d8516ff69e5e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3ccff6ab7e93045877d8516ff69e5e5">&#9670;&nbsp;</a></span>TEST_CASE() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">&quot;label lower bound&quot;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="model-io_8cpp_source.html#l00508">508</a> of file <a class="el" href="model-io_8cpp_source.html">model-io.cpp</a>.</p>

<p class="reference">References <a class="el" href="namespacedismec_1_1io_1_1model.html#aa296f53aedee6f59002fa01439ebc794a6d5ba618729df78c44be2ffc850fa281">dismec::io::model::DENSE_TXT</a>, <a class="el" href="model-io_8cpp_source.html#l00116">dismec::io::model::PartialModelIO::label_lower_bound()</a>, and <a class="el" href="model-io_8h_source.html#l00176">dismec::io::model::PartialModelIO::m_SubFiles</a>.</p>

</div>
</div>
<a id="ad4ace95ffb6afe677c9328cdd7c0803c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4ace95ffb6afe677c9328cdd7c0803c">&#9670;&nbsp;</a></span>TEST_CASE() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">&quot;partial model writer verifier&quot;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="test"><dt><b><a class="el" href="test.html#_test000008">Test:</a></b></dt><dd>This test case checks that <code>PartialModelSaver</code> verifies that the partial models it receives are compatible. This includes checking that the number of total labels/features match. To check that the error condition we want to check for is really the problem, we first try the <code>add_model</code> call with an invalid partial model, and secondly call it with a corrected version. If the corrected version also fails, we know that our check did not work, or that the first call did throw but still added the partial model to its model list. We assume that label overlap tests are correctly performed; this is tested in the unit test for <code>insert_sub_file</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="model-io_8cpp_source.html#l00478">478</a> of file <a class="el" href="model-io_8cpp_source.html">model-io.cpp</a>.</p>

<p class="reference">References <a class="el" href="model-io_8cpp_source.html#l00172">dismec::io::model::PartialModelSaver::add_model()</a>, <a class="el" href="model-io_8cpp_source.html#l00277">dismec::io::model::PartialModelSaver::finalize()</a>, <a class="el" href="model-io_8h_source.html#l00115">dismec::io::model::SaveOption::Format</a>, and <a class="el" href="namespacedismec_1_1io_1_1model.html#aa296f53aedee6f59002fa01439ebc794ab901a11d23ec68072265b7c78e650e50">dismec::io::model::NULL_FORMAT</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_c184e51c84f2c3f0345bbc8a0d75d3e1.html">io</a></li><li class="navelem"><a class="el" href="model-io_8cpp.html">model-io.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
