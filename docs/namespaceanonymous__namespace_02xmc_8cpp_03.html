<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DiSMEC++: anonymous_namespace{xmc.cpp} Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DiSMEC++
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('namespaceanonymous__namespace_02xmc_8cpp_03.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">anonymous_namespace{xmc.cpp} Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structanonymous__namespace_02xmc_8cpp_03_1_1XMCHeader.html">XMCHeader</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collects the data from the header of an xmc file <a class="el" href="xmc-data.html">XMC data format</a>.  <a href="structanonymous__namespace_02xmc_8cpp_03_1_1XMCHeader.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4e6b29d5935791136903c9c0175475d2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structanonymous__namespace_02xmc_8cpp_03_1_1XMCHeader.html">XMCHeader</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceanonymous__namespace_02xmc_8cpp_03.html#a4e6b29d5935791136903c9c0175475d2">parse_xmc_header</a> (const std::string &amp;content)</td></tr>
<tr class="memdesc:a4e6b29d5935791136903c9c0175475d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses the header (number of examples, features, labels) of an XMC dataset file.  <a href="namespaceanonymous__namespace_02xmc_8cpp_03.html#a4e6b29d5935791136903c9c0175475d2">More...</a><br /></td></tr>
<tr class="separator:a4e6b29d5935791136903c9c0175475d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0054012b726b5f8577df49f29b2b445"><td class="memItemLeft" align="right" valign="top">std::vector&lt; long &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceanonymous__namespace_02xmc_8cpp_03.html#aa0054012b726b5f8577df49f29b2b445">count_features_per_example</a> (std::istream &amp;source, std::size_t num_examples=100 '000)</td></tr>
<tr class="memdesc:aa0054012b726b5f8577df49f29b2b445"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extracts number of nonzero features for each instance.  <a href="namespaceanonymous__namespace_02xmc_8cpp_03.html#aa0054012b726b5f8577df49f29b2b445">More...</a><br /></td></tr>
<tr class="separator:aa0054012b726b5f8577df49f29b2b445"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad15daed127e6a2f21b4243a65522f245"><td class="memTemplParams" colspan="2">template&lt;class F &gt; </td></tr>
<tr class="memitem:ad15daed127e6a2f21b4243a65522f245"><td class="memTemplItemLeft" align="right" valign="top">const char *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceanonymous__namespace_02xmc_8cpp_03.html#ad15daed127e6a2f21b4243a65522f245">parse_labels</a> (const char *line, F &amp;&amp;callback)</td></tr>
<tr class="memdesc:ad15daed127e6a2f21b4243a65522f245"><td class="mdescLeft">&#160;</td><td class="mdescRight">parses the labels part of a xmc dataset line.  <a href="namespaceanonymous__namespace_02xmc_8cpp_03.html#ad15daed127e6a2f21b4243a65522f245">More...</a><br /></td></tr>
<tr class="separator:ad15daed127e6a2f21b4243a65522f245"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4991673711a392ffe36360322f9ee69"><td class="memTemplParams" colspan="2">template&lt;long IndexOffset&gt; </td></tr>
<tr class="memitem:ad4991673711a392ffe36360322f9ee69"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceanonymous__namespace_02xmc_8cpp_03.html#ad4991673711a392ffe36360322f9ee69">read_into_buffers</a> (std::istream &amp;source, <a class="el" href="namespacedismec.html#a87f34b52ec3d9133536bb78ae10bcb0d">SparseFeatures</a> &amp;feature_buffer, std::vector&lt; std::vector&lt; long &gt;&gt; &amp;label_buffer)</td></tr>
<tr class="memdesc:ad4991673711a392ffe36360322f9ee69"><td class="mdescLeft">&#160;</td><td class="mdescRight">iterates over the lines in <code>source</code> and puts the corresponding features and labels into the given buffers.  <a href="namespaceanonymous__namespace_02xmc_8cpp_03.html#ad4991673711a392ffe36360322f9ee69">More...</a><br /></td></tr>
<tr class="separator:ad4991673711a392ffe36360322f9ee69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d9b47982812a5026bbd0ff5f98959ef"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceanonymous__namespace_02xmc_8cpp_03.html#a6d9b47982812a5026bbd0ff5f98959ef">write_label_list</a> (std::ostream &amp;stream, const std::vector&lt; int &gt; &amp;labels)</td></tr>
<tr class="separator:a6d9b47982812a5026bbd0ff5f98959ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa0054012b726b5f8577df49f29b2b445"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0054012b726b5f8577df49f29b2b445">&#9670;&nbsp;</a></span>count_features_per_example()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;long&gt; anonymous_namespace{xmc.cpp}::count_features_per_example </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>num_examples</em> = <code>100'000</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extracts number of nonzero features for each instance. </p>
<p>This iterates over the lines in <code>source</code> and extracts the number of nonzero features for each line. You can optionally supply the number of examples expected, which will be used to reserve memory in the counter buffer. Completely empty lines are ignored, as are lines that start with # (see <a class="el" href="xmc-data.html">XMC data format</a>). This function does not validate that the data is given in the correct format. It just counts the number of occurences of the colon <code>:</code> character, which in correctly formatted lines corresponds to the number of labels. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>The stream from which to read. Should not contain the header. </td></tr>
    <tr><td class="paramname">num_examples</td><td>Number of examples to expect. This is used to reserve space in the result vector. Optional, but if not given may result in additional allocations being performed and/or too much memory being used. </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000008">Todo:</a></b></dt><dd>also count number of labels based on <code>,</code>, then we can reserve also the label vector </dd></dl>

<p class="definition">Definition at line <a class="el" href="xmc_8cpp_source.html#l00075">75</a> of file <a class="el" href="xmc_8cpp_source.html">xmc.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="xmc_8cpp_source.html#l00225">dismec::io::read_xmc_dataset()</a>, and <a class="el" href="xmc_8cpp_source.html#l00376">TEST_CASE()</a>.</p>

</div>
</div>
<a id="ad15daed127e6a2f21b4243a65522f245"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad15daed127e6a2f21b4243a65522f245">&#9670;&nbsp;</a></span>parse_labels()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class F &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">const char* anonymous_namespace{xmc.cpp}::parse_labels </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">F &amp;&amp;&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>parses the labels part of a xmc dataset line. </p>
<p>Returns a pointer to where the label part ends and feature parsing should start. Each labels is parsed as an integer number (with possibly leading spaces), followed by either a comma, indicating more labels, or a whitespace indicating this was the last label. If the first character is a white space, this is interpreted as the absence of labels. This function expects that comments and empty lines have already been skipped. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">line</td><td>Pointer to a null-terminated string. </td></tr>
    <tr><td class="paramname">callback</td><td>A function that takes a single parameter of type long, which will be called for each label that is encountered. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">If</td><td>number parsing fails, or the format is not as expected. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer into the string given by <code>line</code> from which the feature parsing should start. </dd></dl>

<p class="definition">Definition at line <a class="el" href="xmc_8cpp_source.html#l00114">114</a> of file <a class="el" href="xmc_8cpp_source.html">xmc.cpp</a>.</p>

<p class="reference">References <a class="el" href="common_8h_source.html#l00034">dismec::io::parse_long()</a>, and <a class="el" href="common_8h_source.html#l00023">THROW_ERROR</a>.</p>

<p class="reference">Referenced by <a class="el" href="xmc_8cpp_source.html#l00164">read_into_buffers()</a>, and <a class="el" href="xmc_8cpp_source.html#l00421">TEST_CASE()</a>.</p>

</div>
</div>
<a id="a4e6b29d5935791136903c9c0175475d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e6b29d5935791136903c9c0175475d2">&#9670;&nbsp;</a></span>parse_xmc_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structanonymous__namespace_02xmc_8cpp_03_1_1XMCHeader.html">XMCHeader</a> anonymous_namespace{xmc.cpp}::parse_xmc_header </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>content</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses the header (number of examples, features, labels) of an XMC dataset file. </p>
<p>parses the given line as the header of an xmc dataset. The header is expected to consist of three whitespace separated positive integers in the order <code>#examples #features #labels</code>. </p><dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">If</td><td>any of the parsed numbers is non-positive, or if the parsing itself fails. </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000007">Todo:</a></b></dt><dd>throw if there is more data on the line. </dd></dl>

<p class="definition">Definition at line <a class="el" href="xmc_8cpp_source.html#l00031">31</a> of file <a class="el" href="xmc_8cpp_source.html">xmc.cpp</a>.</p>

<p class="reference">References <a class="el" href="common_8cpp_source.html#l00049">dismec::io::parse_header()</a>, and <a class="el" href="common_8h_source.html#l00023">THROW_ERROR</a>.</p>

<p class="reference">Referenced by <a class="el" href="xmc_8cpp_source.html#l00225">dismec::io::read_xmc_dataset()</a>, and <a class="el" href="xmc_8cpp_source.html#l00337">TEST_CASE()</a>.</p>

</div>
</div>
<a id="ad4991673711a392ffe36360322f9ee69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4991673711a392ffe36360322f9ee69">&#9670;&nbsp;</a></span>read_into_buffers()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;long IndexOffset&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void anonymous_namespace{xmc.cpp}::read_into_buffers </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacedismec.html#a87f34b52ec3d9133536bb78ae10bcb0d">SparseFeatures</a> &amp;&#160;</td>
          <td class="paramname"><em>feature_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::vector&lt; long &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>label_buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>iterates over the lines in <code>source</code> and puts the corresponding features and labels into the given buffers. </p>
<p>These are expected to be pre-allocated with the correct size. This means that <code>feature_buffer</code> has to be an empty sparse matrix of dimensions <code>num_examples x num_features</code>, and <code>label_buffer</code> should be a vector (of empty vectors) of size <code>num_labels</code>. To speed up reading, it is advisable to reserve the appropriate amount of space in the buffers, though this is not technically necessary. </p><dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">IndexOffsetThe</td><td>template-parameter <code>IndexOffset</code> is used to switch between 0-based and 1-based indexing. Internally, we always use 0-based indexing, so if <code>IndexOffset != 0</code> we subtract the offset from the indices that are read from the file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>istream from which the lines are read. If the file has a header, this has to be skipped before calling <code>read_into_buffers</code>. </td></tr>
    <tr><td class="paramname">feature_buffer</td><td>Shared pointer to an empty sparse matrix where rows correspond to examples and columns correspond to features. </td></tr>
    <tr><td class="paramname">label_buffer</td><td>Vector of vectors, where the inner vectors will list the indices of the examples in which the label (as given by the outer index) is present. The outer vector has to be of size <code>num_label</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">If</td><td>feature, label or example index are out of bounds. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="xmc_8cpp_source.html#l00164">164</a> of file <a class="el" href="xmc_8cpp_source.html">xmc.cpp</a>.</p>

<p class="reference">References <a class="el" href="xmc_8cpp_source.html#l00114">parse_labels()</a>, <a class="el" href="common_8h_source.html#l00052">dismec::io::parse_sparse_vector_from_text()</a>, <a class="el" href="conversion_8h_source.html#l00042">dismec::ssize()</a>, and <a class="el" href="common_8h_source.html#l00023">THROW_ERROR</a>.</p>

</div>
</div>
<a id="a6d9b47982812a5026bbd0ff5f98959ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d9b47982812a5026bbd0ff5f98959ef">&#9670;&nbsp;</a></span>write_label_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; anonymous_namespace{xmc.cpp}::write_label_list </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>labels</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xmc_8cpp_source.html#l00276">276</a> of file <a class="el" href="xmc_8cpp_source.html">xmc.cpp</a>.</p>

<p class="reference">References <a class="el" href="conversion_8h_source.html#l00042">dismec::ssize()</a>.</p>

<p class="reference">Referenced by <a class="el" href="xmc_8cpp_source.html#l00294">dismec::io::save_xmc_dataset()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceanonymous__namespace_02xmc_8cpp_03.html">anonymous_namespace{xmc.cpp}</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
